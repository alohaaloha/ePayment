package travelsafe.business.rules;

import travelsafe.model.*;

rule "Initial price"
salience 1
dialect "mvel"
    when
        $travelInsurance : TravelInsurance()
    then
        $travelInsurance.setTotalPrice(10.0);
    end

/*
rule "Initial price without linked price"
salience 0
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(price == null)
        $price : Price()
    then
        $travelInsurance.setPrice($price);
        $travelInsurance.setTotalPrice($price.getAmount());
    end

rule "Initial price with linked price"
salience 0
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(price != null, price == $price)
        $price : Price()
    then
        $travelInsurance.setTotalPrice($price.getAmount());
    end

#####

rule "Travel insurance duration - less or equal than five days"
salience -1
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(getDuration() <= 5, $currentTotalPrice : totalPrice)
        $item : Item(name == "less_equal_five_duration")
    then
        Double newTotalPrice = $currentTotalPrice + $travelInsurance.getDuration()*$item.getCoef();

        $travelInsurance.setTotalPrice(newTotalPrice);
    end

rule "Travel insurance duration - more than five days and less than or equal ten days"
salience -1
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(5 <getDuration(), getDuration() <= 10, $currentTotalPrice : totalPrice)
        $item : Item(name == "five_more_les_equal_ten_duration")
    then
        Double newTotalPrice = $currentTotalPrice + $item.getCoef();

        $travelInsurance.setTotalPrice(newTotalPrice);
    end

rule "TravelInsurance duration - more than ten days"
salience -1
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(10 < getDuration(), $currentTotalPrice : totalPrice)
        $item : Item(name == "ten_more_duration")
    then
        Double newTotalPrice = $currentTotalPrice*$item.getCoef();

        $travelInsurance.setTotalPrice(newTotalPrice);
    end

#####

rule "Number of people - one person"
salience -2
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(numberOfPeople == 1, $currentTotalPrice : totalPrice)
        $item : Item(name == "equal_one_number_of_people")
    then
        Double newTotalPrice = $currentTotalPrice + $item.getCoef();

        $travelInsurance.setTotalPrice(newTotalPrice);
    end

rule "Number of people - more than one and less than or equal five person"
salience -2
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(1 < numberOfPeople, numberOfPeople <= 5, $currentTotalPrice : totalPrice)
        $item : Item(name == "one_more_less_equal_five_number_of_people")
    then
        Double newTotalPrice = $currentTotalPrice + $travelInsurance.getNumberOfPeople()*$item.getCoef();

        $travelInsurance.setTotalPrice(newTotalPrice);
    end

rule "Number of people - more than five"
salience -2
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(5 < numberOfPeople, $currentTotalPrice : totalPrice)
        $item : Item(name == "five_more_number_of_people")
    then
        Double newTotalPrice = $currentTotalPrice*$item.getCoef();

        $travelInsurance.setTotalPrice(newTotalPrice);
    end

#####

rule "Sport - football"
salience -3
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

rule "Sport - skating"
salience -3
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

rule "Sport - car driving"
salience -3
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

#####

rule "Max amount of insurance - less than or equal 1000$"
salience -4
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(maxAmount <= 1000, $currentTotalPrice : totalPrice)
        $item : Item(name == "less_equal_1000_max_amount")
    then
        Double newTotalPrice = $currentTotalPrice + $item.getCoef();

        $travelInsurance.setTotalPrice(newTotalPrice);
    end

rule "Max amount of insurance - more than 1000$"
salience -4
dialect "mvel"
    when
        $travelInsurance : TravelInsurance(1000 < maxAmount, $currentTotalPrice : totalPrice)
        $item : Item("1000_more_max_amount")
    then
        Double newTotalPrice = $currentTotalPrice*$item.getCoef();

        $travelInsurance.setTotalPrice(newTotalPrice);
    end

#####

rule "Home insurance - surface area - less than or equal 50m^2"
salience -5
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

rule "Home insurance - surface are - more than 50m^2"
salience -5
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

#####

rule "Home insurance - age - less than or equal 10 years"
salience -6
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

rule "Home insurance - age - more than 10 years"
salience -6
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

#####

rule "Home insurance - estimated value"
salience -7
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

#####

rule "Home insurance - insurance description - flood"
salience -7
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

rule "Home insurance - insurance description - fire"
salience -7
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end

#####

rule "Car insurance - car package - fix"
salience -8
dialect "mvel"
    when
        $travelInsurance : TravelInsurance($currentTotalPrice : totalPrice)
    then
        $travelInsurance.setTotalPrice($currentTotalPrice);
    end
*/